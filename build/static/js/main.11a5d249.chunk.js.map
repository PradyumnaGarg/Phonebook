{"version":3,"sources":["httpServices.js","App.js","index.js"],"names":["baseURL","axios","get","then","response","data","person","post","id","delete","status","put","_id","Filter","filter","setFilter","value","onChange","e","target","PersonForm","props","onSubmit","addPerson","newName","setNewName","type","newNumber","setNewNumber","Persons","personsToShow","deletePerson","console","log","map","name","number","onClick","App","useEffect","phonebookService","persons","setPersons","useState","show","message","error","setError","updatePerson","personList","respPerson","ogperson","filterDeleted","toLowerCase","includes","propsForPersonForm","preventDefault","find","window","confirm","concat","catch","hidden","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.11a5d249.chunk.js","sourcesContent":["import axios from 'axios';\r\nlet baseURL = 'http://localhost:2000/api/persons'\r\n\r\nif (process.env.REACT_APP_ENVTYPE === 'prod') {\r\n    baseURL = '/api/persons'\r\n}\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseURL);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst create = (person) => {\r\n    const request = axios.post(baseURL, person);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst deleteEntry = (id) => {\r\n    const request = axios.delete(`${baseURL}/${id}`);\r\n    return request.then(response => response.status);\r\n}\r\n\r\nconst update = (person) => {\r\n    const request = axios.put(`${baseURL}/${person._id}`, person);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nexport default { getAll, create, deleteEntry, update };","import React, { useState, useEffect } from 'react';\nimport phonebookService from './httpServices';\n\nconst App = () => {\n\n  useEffect(() => {\n    phonebookService.getAll().then((persons) => setPersons(persons));\n  }, [])\n\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ filter, setFilter ] = useState('');\n  const [ error, setError ] = useState({show: false, message: ''});\n  \n  const addPerson = (e) => {\n    e.preventDefault();\n    const personList = [...persons];\n    const person = personList.find((person) => person.name === newName);\n    setError({show: false, message: ''});\n    if(person) {\n      const confirmUpdate = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      if (confirmUpdate) {\n        updatePerson(person, personList);\n      }\n      return;\n    }\n    phonebookService.create({name: newName, number: newNumber})\n    .then((person) => {\n      console.log('Resp', person)\n      setPersons(personList.concat(person))\n    })\n    .catch((error) => {\n      setError({show: true, message: error.response.data.error});\n    });\n  }\n\n  const updatePerson = (person, personList) => {\n    phonebookService.update({...person, number: newNumber})\n    .then((respPerson) => {\n      personList = personList.map(ogperson => {\n        if (ogperson.id === person.id) {\n          ogperson = {...ogperson, number: newNumber};\n        }\n        return ogperson;\n      });\n\n      setPersons(personList);\n    })\n  }\n\n  const deletePerson = (person) => {\n    const deleteConfirm = window.confirm(`Delete ${person._id}`);\n\n    if (deleteConfirm) {\n      phonebookService.deleteEntry(person._id)\n      .then((status) => {\n        if (status === 204) {\n          filterDeleted(person._id);\n        }\n      })\n      .catch((error) => {\n        console.log(error.response.data.error);\n      })\n    }\n  }\n\n  const filterDeleted = (id) => {\n    const personList = persons.filter((person) => person._id !== id);\n    setPersons([...personList]);\n    personsToShow = [...personList];\n  }\n  \n  let personsToShow = filter ? persons.filter((person) => person.name.toLowerCase().includes(filter.toLowerCase())) : persons;\n  \n  const propsForPersonForm = {\n    addPerson,\n    newName,\n    newNumber,\n    setNewName,\n    setNewNumber\n  }\n  return (\n    <div>\n      <div hidden={!error.show}>Error: {error.message}</div>\n      <h2>Phonebook</h2>\n      <Filter filter = {filter} setFilter = {setFilter} />\n      <h2>add a new</h2>\n      <PersonForm props = {propsForPersonForm} />\n      <h2>Numbers</h2>\n      <Persons personsToShow = {personsToShow} deletePerson = {deletePerson} />\n    </div>\n  )\n}\n\nconst Filter = ({filter, setFilter}) => {\n   return (\n    <div>\n      filter shown with <input value = {filter} onChange = {(e) => setFilter(e.target.value)}  />\n    </div>\n   )\n}\n\nconst PersonForm = ({props}) => {\n  return (\n    <div>\n      <form onSubmit={props.addPerson}>\n        <div>\n          name: <input value = {props.newName}  onChange = {(e) => props.setNewName(e.target.value)} />\n        </div>\n        <div>\n          number: <input type='number' value = {props.newNumber}  onChange = {(e) => props.setNewNumber(e.target.value)} />\n        </div>\n        <div>\n          <button type='submit'>Add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nconst Persons = ({personsToShow, deletePerson}) => {\n  console.log(personsToShow);\n  return (\n    <div>\n    {personsToShow.map((person) => (\n      <div key = {person._id}>\n        <p >{person.name} {person.number}</p>\n        <button onClick = {() => {deletePerson(person)}}>Delete</button>\n      </div>\n    ))}\n  </div>\n  )\n}\n\nexport default App;","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}