{"version":3,"sources":["httpServices.js","App.js","index.js"],"names":["baseURL","axios","get","then","response","data","person","post","id","delete","status","put","Filter","filter","setFilter","value","onChange","e","target","PersonForm","props","onSubmit","addPerson","newName","setNewName","type","newNumber","setNewNumber","Persons","personsToShow","deletePerson","console","log","map","name","number","onClick","App","useEffect","phonebookService","persons","setPersons","useState","updatePerson","personList","respPerson","ogperson","filterDeleted","toLowerCase","includes","propsForPersonForm","preventDefault","find","window","confirm","concat","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.377bd61f.chunk.js","sourcesContent":["import axios from 'axios';\r\nlet baseURL = 'http://localhost:2000/api/persons'\r\n\r\nif (process.env.REACT_APP_ENVTYPE === 'prod') {\r\n    baseURL = '/api/persons'\r\n}\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseURL);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst create = (person) => {\r\n    const request = axios.post(baseURL, person);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst deleteEntry = (id) => {\r\n    const request = axios.delete(`${baseURL}/${id}`);\r\n    return request.then(response => response.status);\r\n}\r\n\r\nconst update = (person) => {\r\n    const request = axios.put(`${baseURL}/${person.id}`, person);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nexport default { getAll, create, deleteEntry, update };","import React, { useState, useEffect } from 'react';\nimport phonebookService from './httpServices';\n\nconst App = () => {\n\n  useEffect(() => {\n    phonebookService.getAll().then((persons) => setPersons(persons));\n  }, [])\n\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ filter, setFilter ] = useState('');\n  \n  const addPerson = (e) => {\n    e.preventDefault();\n    const personList = [...persons];\n    const person = personList.find((person) => person.name === newName);\n    if(person) {\n      const confirmUpdate = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      if (confirmUpdate) {\n        updatePerson(person, personList);\n      }\n      return;\n    }\n    phonebookService.create({name: newName, number: newNumber})\n    .then((person) => setPersons(personList.concat(person)))\n    .catch((error) => console.log(error));\n  }\n\n  const updatePerson = (person, personList) => {\n    phonebookService.update({...person, number: newNumber})\n    .then((respPerson) => {\n      personList = personList.map(ogperson => {\n        if (ogperson.id === person.id) {\n          ogperson = {...ogperson, number: newNumber};\n        }\n        return ogperson;\n      });\n\n      setPersons(personList);\n    })\n  }\n\n  const deletePerson = (person) => {\n    const deleteConfirm = window.confirm(`Delete ${person.name}`);\n\n    if (deleteConfirm) {\n      phonebookService.deleteEntry(person.id)\n      .then((status) => {\n        if (status === 204) {\n          filterDeleted(person.id);\n        }\n      })\n    }\n  }\n\n  const filterDeleted = (id) => {\n    const personList = persons.filter((person) => person.id !== id);\n    setPersons([...personList]);\n    personsToShow = [...personList];\n  }\n  \n  let personsToShow = filter ? persons.filter((person) => person.name.toLowerCase().includes(filter.toLowerCase())) : persons;\n  \n  const propsForPersonForm = {\n    addPerson,\n    newName,\n    newNumber,\n    setNewName,\n    setNewNumber\n  }\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Filter filter = {filter} setFilter = {setFilter} />\n      <h2>add a new</h2>\n      <PersonForm props = {propsForPersonForm} />\n      <h2>Numbers</h2>\n      <Persons personsToShow = {personsToShow} deletePerson = {deletePerson} />\n    </div>\n  )\n}\n\nconst Filter = ({filter, setFilter}) => {\n   return (\n    <div>\n      filter shown with <input value = {filter} onChange = {(e) => setFilter(e.target.value)}  />\n    </div>\n   )\n}\n\nconst PersonForm = ({props}) => {\n  return (\n    <div>\n      <form onSubmit={props.addPerson}>\n        <div>\n          name: <input value = {props.newName}  onChange = {(e) => props.setNewName(e.target.value)} />\n        </div>\n        <div>\n          number: <input type='number' value = {props.newNumber}  onChange = {(e) => props.setNewNumber(e.target.value)} />\n        </div>\n        <div>\n          <button type='submit'>Add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nconst Persons = ({personsToShow, deletePerson}) => {\n  console.log(personsToShow);\n  return (\n    <div>\n    {personsToShow.map((person) => (\n      <div key = {person.id}>\n        <p >{person.name} {person.number}</p>\n        <button onClick = {() => {deletePerson(person)}}>Delete</button>\n      </div>\n    ))}\n  </div>\n  )\n}\n\nexport default App;","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}