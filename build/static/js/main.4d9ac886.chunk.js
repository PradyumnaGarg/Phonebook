(this.webpackJsonpreact2021=this.webpackJsonpreact2021||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(18),c=n.n(r),a=n(6),s=n(8),o=n(3),l=n(2),i=n(5),d=n.n(i),u="/api/persons";"dev"==="prod ".trim()&&(u="http://localhost:2000/api/persons");var b={getAll:function(){return d.a.get(u).then((function(e){return e.data}))},create:function(e){return d.a.post(u,e).then((function(e){return e.data}))},deleteEntry:function(e){return d.a.delete("".concat(u,"/").concat(e)).then((function(e){return e.status}))},update:function(e){return d.a.put("".concat(u,"/").concat(e._id),e).then((function(e){return e.data}))}},m=n(0),j=function(e){var t=e.personsToShow,n=e.deletePerson;return console.log(t),Object(m.jsxs)("div",{className:"w-full custom-box-shadow rounded-lg p-5 space-y-4",children:[Object(m.jsx)("h2",{className:"text-lg font-semibold",children:"Contacts"}),t.map((function(e){return Object(m.jsxs)("div",{className:"border border-gray-300 rounded-lg px-4 py-2 flex items-center justify-between",children:[Object(m.jsxs)("div",{className:"mr-4 flex flex-col",children:[Object(m.jsxs)("p",{className:"text-medium",children:[e.name," "]}),Object(m.jsx)("p",{className:"",children:e.number})]}),Object(m.jsx)("button",{className:"px-8 py-2 rounded-lg bg-red-500 hover:bg-red-600 text-white",onClick:function(){n(e)},children:"Delete"})]},e._id)}))]})},h=function(e){var t=e.filter,n=e.setFilter;return Object(m.jsxs)("div",{className:"mb-8 w-full custom-box-shadow rounded-lg p-5",children:[Object(m.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Filter"}),Object(m.jsx)("label",{htmlFor:"filter-name",className:"block mb-2",children:"Name"}),Object(m.jsx)("input",{id:"filter-name",className:"border-gray-300 border rounded-lg p-2 w-full",placeholder:"Filter as you type",type:"text",value:t,onChange:function(e){return n(e.target.value)}})]})},f=function(e){var t=e.props;return Object(m.jsx)("div",{className:"custom-box-shadow p-5 rounded-lg",children:Object(m.jsxs)("form",{className:"flex flex-col space-y-4",onSubmit:t.addPerson,children:[Object(m.jsx)("h2",{className:"text-lg font-semibold",children:"Add new contact"}),Object(m.jsxs)("p",{className:"text-red-500",hidden:!t.error.show,children:["Error: ",t.error.message]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"name",className:"block mb-2",children:"Name"}),Object(m.jsx)("input",{id:"name",className:"w-full border border-gray-300 rounded-lg",type:"text",value:t.newName,onChange:function(e){return t.setNewName(e.target.value)}})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"number",className:"block mb-2",children:"Contact number"}),Object(m.jsx)("input",{id:"number",className:"w-full border border-gray-300 rounded-lg",name:"contact-number",type:"number",value:t.newNumber,onChange:function(e){return t.setNewNumber(e.target.value)}})]}),Object(m.jsx)("button",{className:"bg-green-500 hover:bg-green-600 text-white px-8 py-2 rounded-lg",type:"submit",children:"Add"})]})})},x=function(){return Object(m.jsxs)("div",{className:"flex items-baseline bg-green-500 text-white space-x-4 p-4",children:[Object(m.jsx)("h1",{className:"text-2xl font-semibold georama-medium",children:"phonebook"}),Object(m.jsx)("p",{className:"text-lg georama-medium",children:"All contacts at one place!"})]})},p=function(){Object(l.useEffect)((function(){b.getAll().then((function(e){return r(e)}))}),[]);var e=Object(l.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(l.useState)(""),i=Object(o.a)(c,2),d=i[0],u=i[1],p=Object(l.useState)(""),O=Object(o.a)(p,2),g=O[0],N=O[1],w=Object(l.useState)(""),v=Object(o.a)(w,2),y=v[0],k=v[1],C=Object(l.useState)({show:!1,message:""}),S=Object(o.a)(C,2),_=S[0],F=S[1],A=function(e,t){b.update(Object(a.a)(Object(a.a)({},e),{},{number:g})).then((function(n){t=t.map((function(t){return t._id===e._id&&(t=Object(a.a)(Object(a.a)({},t),{},{number:g})),t})),r(t)}))},E=function(e){var t=n.filter((function(t){return t._id!==e}));r(Object(s.a)(t)),P=Object(s.a)(t)},P=y?n.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())})):n,D={addPerson:function(e){e.preventDefault();var t=Object(s.a)(n),c=t.find((function(e){return e.name===d}));(F({show:!1,message:""}),c)?window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))&&A(c,t):b.create({name:d,number:g}).then((function(e){console.log("Resp",e),r(t.concat(e))})).catch((function(e){F({show:!0,message:e.response.data.error})}))},newName:d,newNumber:g,setNewName:u,setNewNumber:N,error:_};return Object(m.jsxs)("div",{children:[Object(m.jsx)(x,{}),Object(m.jsx)("div",{className:"p-4",children:Object(m.jsx)("div",{className:"flex justify-center",children:Object(m.jsxs)("div",{className:"w-full lg:w-1/3 space-y-8",children:[Object(m.jsx)(f,{props:D}),Object(m.jsx)(h,{filter:y,setFilter:k}),Object(m.jsx)(j,{personsToShow:P,deletePerson:function(e){window.confirm("Delete ".concat(e._id))&&b.deleteEntry(e._id).then((function(t){204===t&&E(e._id)})).catch((function(e){console.log(e.response.data.error)}))}})]})})})]})};n(42);c.a.render(Object(m.jsx)(p,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.4d9ac886.chunk.js.map