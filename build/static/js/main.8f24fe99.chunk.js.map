{"version":3,"sources":["httpServices.js","components/Persons.js","components/Filter.js","components/PersonForm.js","App.js","index.js"],"names":["baseURL","axios","get","then","response","data","person","post","id","delete","status","put","_id","Persons","personsToShow","deletePerson","console","log","className","map","name","number","onClick","Filter","filter","setFilter","for","placeholder","type","value","onChange","e","target","PersonForm","props","onSubmit","addPerson","newName","setNewName","newNumber","setNewNumber","App","useEffect","phonebookService","persons","setPersons","useState","show","message","error","setError","updatePerson","personList","respPerson","ogperson","filterDeleted","toLowerCase","includes","propsForPersonForm","preventDefault","find","window","confirm","concat","catch","hidden","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8f24fe99.chunk.js","sourcesContent":["import axios from 'axios';\r\n// let baseURL = 'http://localhost:2000/api/persons'\r\nlet baseURL = '/api/persons'\r\n\r\nif (process.env.REACT_APP_ENVTYPE === \"dev\") {\r\n    console.log('[HTTP] Env type', typeof(process.env.REACT_APP_ENVTYPE));\r\n    baseURL = '/api/persons'\r\n}\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseURL);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst create = (person) => {\r\n    const request = axios.post(baseURL, person);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst deleteEntry = (id) => {\r\n    const request = axios.delete(`${baseURL}/${id}`);\r\n    return request.then(response => response.status);\r\n}\r\n\r\nconst update = (person) => {\r\n    const request = axios.put(`${baseURL}/${person._id}`, person);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nexport default { getAll, create, deleteEntry, update };","const Persons = ({personsToShow, deletePerson}) => {\r\n    console.log(personsToShow);\r\n    return (\r\n      <div className='w-full custom-box-shadow rounded-lg p-5 space-y-4'>\r\n        <h2 className='text-lg font-semibold'>Contacts</h2>\r\n        {personsToShow.map((person) => (\r\n          <div className='border border-gray-300 rounded-lg px-4 py-2 flex items-center justify-between' key = {person._id}>\r\n            <div className='mr-4 flex flex-col'>\r\n              <p className='text-medium'>{person.name} </p>\r\n              <p className=''>{person.number}</p>\r\n            </div>\r\n            <button className='px-8 py-2 rounded-lg bg-red-500 hover:bg-red-600 text-white' onClick = {() => {deletePerson(person)}}>Delete</button>\r\n          </div>\r\n        ))}\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Persons;\r\n","const Filter = ({filter, setFilter}) => {\r\n    return (\r\n     <div className='mb-8 w-full custom-box-shadow rounded-lg p-5'>\r\n        <h2 className='text-lg font-semibold mb-4'>Filter</h2>\r\n        <label for='filter-name' className='block mb-2'>Name</label>\r\n        <input \r\n          id='filter-name'\r\n          className='border-gray-300 border rounded-lg p-2 w-full'\r\n          placeholder='Filter as you type'\r\n          type='text'\r\n          value = {filter}\r\n          onChange = {(e) => setFilter(e.target.value)}  />\r\n     </div>\r\n    )\r\n}\r\n\r\nexport default Filter;","const PersonForm = ({props}) => {\r\n    return (\r\n      <div className='custom-box-shadow p-5 rounded-lg'>\r\n        <form className='flex flex-col space-y-4' onSubmit={props.addPerson}>\r\n          <h2 className='text-lg font-semibold'>Add new contact</h2>\r\n          <div>\r\n            <label for='name' className='block mb-2'>Name</label>\r\n            <input \r\n              id='name'\r\n              className='w-full border border-gray-300 rounded-lg'\r\n              type='text'\r\n              value = {props.newName}\r\n              onChange = {(e) => props.setNewName(e.target.value)} />\r\n          </div>\r\n          <div>\r\n            <label for='number' className='block mb-2'>Contact number</label>\r\n            <input \r\n              id='number'\r\n              className='w-full border border-gray-300 rounded-lg'\r\n              name='contact-number'\r\n              type='number'\r\n              value = {props.newNumber}\r\n              onChange = {(e) => props.setNewNumber(e.target.value)} />\r\n          </div>\r\n          <button className='bg-green-500 hover:bg-green-600 text-white px-8 py-2 rounded-lg' type='submit'>Add</button>\r\n        </form>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default PersonForm;\r\n","import React, { useState, useEffect } from 'react';\nimport phonebookService from './httpServices';\nimport Persons from './components/Persons';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\n\nconst App = () => {\n\n  useEffect(() => {\n    phonebookService.getAll().then((persons) => setPersons(persons));\n  }, [])\n\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ filter, setFilter ] = useState('');\n  const [ error, setError ] = useState({show: false, message: ''});\n  \n  const addPerson = (e) => {\n    e.preventDefault();\n    const personList = [...persons];\n    const person = personList.find((person) => person.name === newName);\n    setError({show: false, message: ''});\n    if(person) {\n      const confirmUpdate = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      if (confirmUpdate) {\n        updatePerson(person, personList);\n      }\n      return;\n    }\n    phonebookService.create({name: newName, number: newNumber})\n    .then((person) => {\n      console.log('Resp', person)\n      setPersons(personList.concat(person))\n    })\n    .catch((error) => {\n      setError({show: true, message: error.response.data.error});\n    });\n  }\n\n  const updatePerson = (person, personList) => {\n    phonebookService.update({...person, number: newNumber})\n    .then((respPerson) => {\n      personList = personList.map(ogperson => {\n        if (ogperson._id === person._id) {\n          ogperson = {...ogperson, number: newNumber};\n        }\n        return ogperson;\n      });\n\n      setPersons(personList);\n    })\n  }\n\n  const deletePerson = (person) => {\n    const deleteConfirm = window.confirm(`Delete ${person._id}`);\n\n    if (deleteConfirm) {\n      phonebookService.deleteEntry(person._id)\n      .then((status) => {\n        if (status === 204) {\n          filterDeleted(person._id);\n        }\n      })\n      .catch((error) => {\n        console.log(error.response.data.error);\n      })\n    }\n  }\n\n  const filterDeleted = (id) => {\n    const personList = persons.filter((person) => person._id !== id);\n    setPersons([...personList]);\n    personsToShow = [...personList];\n  }\n  \n  let personsToShow = filter ? persons.filter((person) => person.name.toLowerCase().includes(filter.toLowerCase())) : persons;\n  \n  const propsForPersonForm = {\n    addPerson,\n    newName,\n    newNumber,\n    setNewName,\n    setNewNumber\n  }\n  return (\n    <div>\n      <header className='bg-green-500 p-4'>\n        <h2 className='text-2xl text-white font-bold'>Phonebook</h2>\n      </header>\n      <div className='p-4'>\n        <div hidden={!error.show}>Error: {error.message}</div>\n        <div className='flex justify-center'>\n          <div className='w-full lg:w-1/3 space-y-8'>\n            <PersonForm props = {propsForPersonForm} />\n            <Filter filter = {filter} setFilter = {setFilter} />\n            <Persons personsToShow = {personsToShow} deletePerson = {deletePerson} />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default App;","import ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}