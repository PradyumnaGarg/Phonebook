(this.webpackJsonpreact2021=this.webpackJsonpreact2021||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(18),r=n.n(c),s=n(6),a=n(8),o=n(3),l=n(2),i=n(5),u=n.n(i),d="/api/persons";var b=function(){return u.a.get(d).then((function(e){return e.data}))},j=function(e){return u.a.post(d,e).then((function(e){return e.data}))},m=function(e){return u.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.status}))},f=function(e){return u.a.put("".concat(d,"/").concat(e._id),e).then((function(e){return e.data}))},h=n(0),x=function(e){var t=e.personsToShow,n=e.deletePerson;return console.log(t),Object(h.jsxs)("div",{className:"w-full custom-box-shadow rounded-lg p-5 space-y-4",children:[Object(h.jsx)("h2",{className:"text-lg font-semibold",children:"Contacts"}),t.map((function(e){return Object(h.jsxs)("div",{className:"border border-gray-300 rounded-lg px-4 py-2 flex items-center justify-between",children:[Object(h.jsxs)("div",{className:"mr-4 flex flex-col",children:[Object(h.jsxs)("p",{className:"text-medium",children:[e.name," "]}),Object(h.jsx)("p",{className:"",children:e.number})]}),Object(h.jsx)("button",{className:"px-8 py-2 rounded-lg bg-red-500 hover:bg-red-600 text-white",onClick:function(){n(e)},children:"Delete"})]},e._id)}))]})},O=function(e){var t=e.filter,n=e.setFilter;return Object(h.jsxs)("div",{className:"mb-8 w-full custom-box-shadow rounded-lg p-5",children:[Object(h.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Filter"}),Object(h.jsx)("label",{for:"filter-name",className:"block mb-2",children:"Name"}),Object(h.jsx)("input",{id:"filter-name",className:"border-gray-300 border rounded-lg p-2 w-full",placeholder:"Filter as you type",type:"text",value:t,onChange:function(e){return n(e.target.value)}})]})},p=function(e){var t=e.props;return Object(h.jsx)("div",{className:"custom-box-shadow p-5 rounded-lg",children:Object(h.jsxs)("form",{className:"flex flex-col space-y-4",onSubmit:t.addPerson,children:[Object(h.jsx)("h2",{className:"text-lg font-semibold",children:"Add new contact"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{for:"name",className:"block mb-2",children:"Name"}),Object(h.jsx)("input",{id:"name",className:"w-full border border-gray-300 rounded-lg",type:"text",value:t.newName,onChange:function(e){return t.setNewName(e.target.value)}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{for:"number",className:"block mb-2",children:"Contact number"}),Object(h.jsx)("input",{id:"number",className:"w-full border border-gray-300 rounded-lg",name:"contact-number",type:"number",value:t.newNumber,onChange:function(e){return t.setNewNumber(e.target.value)}})]}),Object(h.jsx)("button",{className:"bg-green-500 hover:bg-green-600 text-white px-8 py-2 rounded-lg",type:"submit",children:"Add"})]})})},g=function(){Object(l.useEffect)((function(){b().then((function(e){return c(e)}))}),[]);var e=Object(l.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(l.useState)(""),i=Object(o.a)(r,2),u=i[0],d=i[1],g=Object(l.useState)(""),w=Object(o.a)(g,2),N=w[0],v=w[1],y=Object(l.useState)(""),k=Object(o.a)(y,2),C=k[0],S=k[1],_=Object(l.useState)({show:!1,message:""}),P=Object(o.a)(_,2),F=P[0],D=P[1],E=function(e,t){f(Object(s.a)(Object(s.a)({},e),{},{number:N})).then((function(n){t=t.map((function(t){return t._id===e._id&&(t=Object(s.a)(Object(s.a)({},t),{},{number:N})),t})),c(t)}))},A=function(e){var t=n.filter((function(t){return t._id!==e}));c(Object(a.a)(t)),J=Object(a.a)(t)},J=C?n.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())})):n,L={addPerson:function(e){e.preventDefault();var t=Object(a.a)(n),r=t.find((function(e){return e.name===u}));(D({show:!1,message:""}),r)?window.confirm("".concat(u," is already added to phonebook, replace the old number with a new one?"))&&E(r,t):j({name:u,number:N}).then((function(e){console.log("Resp",e),c(t.concat(e))})).catch((function(e){D({show:!0,message:e.response.data.error})}))},newName:u,newNumber:N,setNewName:d,setNewNumber:v};return Object(h.jsxs)("div",{children:[Object(h.jsx)("header",{className:"bg-green-500 p-4",children:Object(h.jsx)("h2",{className:"text-2xl text-white font-bold",children:"Phonebook"})}),Object(h.jsxs)("div",{className:"p-4",children:[Object(h.jsxs)("div",{hidden:!F.show,children:["Error: ",F.message]}),Object(h.jsx)("div",{className:"flex justify-center",children:Object(h.jsxs)("div",{className:"w-full lg:w-1/3 space-y-8",children:[Object(h.jsx)(p,{props:L}),Object(h.jsx)(O,{filter:C,setFilter:S}),Object(h.jsx)(x,{personsToShow:J,deletePerson:function(e){window.confirm("Delete ".concat(e._id))&&m(e._id).then((function(t){204===t&&A(e._id)})).catch((function(e){console.log(e.response.data.error)}))}})]})})]})]})};n(42);r.a.render(Object(h.jsx)(g,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.8f24fe99.chunk.js.map