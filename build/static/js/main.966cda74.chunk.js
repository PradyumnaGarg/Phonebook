(this.webpackJsonpreact2021=this.webpackJsonpreact2021||[]).push([[0],{169:function(e,t,s){},170:function(e,t,s){"use strict";s.r(t);var r=s(25),c=s.n(r),a=s(1),n=s(0),o=function(e){var t=e.children;return Object(n.jsx)("div",{className:"flex h-screen",children:Object(n.jsx)("div",{className:"flex items-center justify-center p-5 custom-bg w-full",children:t})})},l=s(2),i=s(30),d=s.n(i),u="/api";"dev"==="prod ".trim()&&(u="http://localhost:2000/api");var b,j=function(){var e=localStorage.getItem("phonebook_token")||null;return{Authorization:"Bearer ".concat(e)}},m={getRequest:function(e){return d.a.get("".concat(u).concat(e),{headers:j()}).then((function(e){return e.data}))},postRequest:function(e,t){return d.a.post("".concat(u).concat(e),t,{headers:j()}).then((function(e){return e.data}))},putRequest:function(e,t){return d.a.put("".concat(u).concat(e),t,{headers:j()}).then((function(e){return e.data}))},deleteRequest:function(e){return d.a.delete("".concat(u).concat(e),{headers:j()}).then((function(e){return e.status}))}},x={registerUser:function(e){var t=e.username,s=e.password,r=e.mobileNumber,c=e.firstName,a=e.lastName;return m.postRequest("/users/register",{username:t,password:s,mobileNumber:r,firstName:c,lastName:a})}},h=s(21),p=s(16),O=function(){var e=Object(h.a)(),t=e.register,s=e.handleSubmit,r=e.formState.errors;return Object(n.jsxs)("form",{onSubmit:s((function(e){console.log(e),x.registerUser(e)})),className:"flex flex-col space-y-4 custom-box-shadow p-10 w-full md:w-3/4 lg:w-1/3 rounded-lg bg-white",children:[Object(n.jsx)("h2",{className:"text-xl",children:"Register to phonebook"}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsxs)("div",{className:"w-1/2 mr-2",children:[Object(n.jsx)("label",{className:"block mb-2",htmlFor:"firstName",children:"Firstname"}),Object(n.jsx)("input",Object(l.a)(Object(l.a)({},t("firstName",{required:!0})),{},{className:"w-full border border-gray-300 rounded-lg",type:"text"})),r.firstName&&Object(n.jsx)("span",{className:"text-red-500 text-sm",children:"First name is required"})]}),Object(n.jsxs)("div",{className:"w-1/2",children:[Object(n.jsx)("label",{className:"block mb-2",htmlFor:"lastName",children:"Lastname"}),Object(n.jsx)("input",Object(l.a)(Object(l.a)({},t("lastName",{required:!0})),{},{className:"w-full border border-gray-300 rounded-lg",type:"text"})),r.lastName&&Object(n.jsx)("span",{className:"text-red-500 text-sm",children:"Last Name is required"})]})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"block mb-2",htmlFor:"email",children:"Email"}),Object(n.jsx)("input",Object(l.a)(Object(l.a)({},t("username",{required:!0})),{},{className:"w-full border border-gray-300 rounded-lg",type:"email"})),r.username&&Object(n.jsx)("span",{className:"text-red-500 text-sm",children:"Email is required"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"block mb-2",htmlFor:"mobileNumber",children:"Mobile Number"}),Object(n.jsx)("input",Object(l.a)(Object(l.a)({},t("mobileNumber",{required:!0})),{},{className:"w-full border border-gray-300 rounded-lg",type:"number",name:"mobileNumber",id:"mobileNumber"})),r.mobileNumber&&Object(n.jsx)("span",{className:"text-red-500 text-sm",children:"Mobile Number is required"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"block mb-2",htmlFor:"password",children:"Password"}),Object(n.jsx)("input",Object(l.a)(Object(l.a)({},t("password",{required:!0})),{},{className:"w-full border border-gray-300 rounded-lg",type:"password",name:"password",id:"password"})),r.password&&Object(n.jsx)("span",{className:"text-red-500 text-sm",children:"Password is required"})]}),Object(n.jsx)("button",{type:"submit",className:"w-full bg-green-500 hover:bg-green-600 text-white px-8 py-2 rounded-lg",children:"Register"}),Object(n.jsxs)("p",{children:["Already have an account? ",Object(n.jsx)(p.b,{className:"text-green-500 hover:text-green-600 underline",to:"/login",children:"Login"})]})]})},f=function(){return Object(n.jsx)(o,{children:Object(n.jsx)(O,{})})},g=s(14),w={loginUser:function(e){var t=e.username,s=e.password;return m.postRequest("/users/login",{username:t,password:s})},onLoginSucess:function(e){localStorage.setItem("phonebook_token",e)}},v=s(58),N=s(9),y=s(60),k=(s(94),s(10)),C=s(59),P=s.n(C),q=Object(a.createContext)({loading:!1,setLoading:null});function S(e){var t=e.children,s=Object(a.useState)(!1),r=Object(N.a)(s,2),c=r[0],o={loading:c,setLoading:r[1]},l=Object(k.css)(b||(b=Object(v.a)(["\n    display: block;\n    margin: auto;\n    border-color: red;\n    "])));return Object(n.jsx)(q.Provider,{value:o,children:Object(n.jsx)(P.a,{active:c,spinner:Object(n.jsx)(y.PuffLoader,{css:l,color:"#28ffb8"}),children:t})})}function L(){var e=Object(a.useContext)(q);if(!e)throw new Error("useLoading must be used with Loading Provider");return e}var R=s(23),F=function(){var e=Object(g.f)(),t=Object(h.a)(),s=t.register,r=t.handleSubmit,c=t.formState.errors,a=L().setLoading;return Object(n.jsxs)("form",{onSubmit:r((function(t){a(!0),setTimeout((function(){w.loginUser(t).then((function(t){var s=t.result.token;a(!1),s&&w.onLoginSucess(s),e.push("/home")})).catch((function(e){var t,s;a(!1),R.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.error)||"Something went wrong")}))}),3e3)})),className:"flex flex-col space-y-4 custom-box-shadow p-8 md:p-10 w-full md:w-3/4 lg:w-1/3 rounded-lg bg-white",children:[Object(n.jsx)("h2",{className:"text-xl",children:"Login to phonebook"}),Object(n.jsxs)("div",{className:"flex flex-col",children:[Object(n.jsx)("label",{className:"block mb-2",htmlFor:"email",children:"Email"}),Object(n.jsx)("input",Object(l.a)(Object(l.a)({},s("username",{required:!0})),{},{className:"w-full border border-gray-300 rounded-lg",type:"email",name:"username"})),c.username&&Object(n.jsx)("span",{className:"text-red-500 text-sm",children:"Email is Required"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"block mb-2",htmlFor:"password",children:"Password"}),Object(n.jsx)("input",Object(l.a)(Object(l.a)({},s("password",{required:!0})),{},{className:"w-full border border-gray-300 rounded-lg",type:"password",name:"password",id:"password"})),c.password&&Object(n.jsx)("span",{className:"text-red-500 text-sm",children:"Password is Required"})]}),Object(n.jsx)("button",{type:"submit",className:"w-full bg-green-500 hover:bg-green-600 text-white px-8 py-2 rounded-lg",children:"Login"}),Object(n.jsx)(p.b,{to:"/forgot-password",className:"text-green-500 hover:text-green-600 underline",children:"Forgot Password?"}),Object(n.jsxs)("p",{children:["Already have an account? ",Object(n.jsx)(p.b,{className:"text-green-500 hover:text-green-600 underline",to:"/register",children:"Register"})]})]})},M=function(){return Object(n.jsx)("div",{className:"flex h-screen",children:Object(n.jsx)("div",{className:"flex items-center justify-center p-5 custom-bg w-full",children:Object(n.jsx)(F,{})})})},E={getAllContacts:function(){return m.getRequest("/contacts")},saveNewContact:function(e){return m.postRequest("/contacts",e)},deleteContact:function(e){return m.deleteRequest("/contacts/".concat(e))},getProfile:function(){return m.getRequest("/users/profile")},changePassword:function(e){return m.putRequest("/users/changePassword",e)}},_={getContactInfo:function(e){return m.getRequest("/contacts/".concat(e))},updateContact:function(e){return m.putRequest("/contacts/".concat(e._id),e)}},A=function(){var e=Object(g.g)().id,t=Object(h.a)(),s=t.register,r=t.handleSubmit,c=t.formState.errors,o=t.reset,i=Object(a.useState)({show:!1,error:!1,message:""}),d=Object(N.a)(i,2),u=d[0],b=d[1],j=Object(a.useState)(!1),m=Object(N.a)(j,2),x=m[0],p=m[1],O=function(t){_.updateContact(Object(l.a)(Object(l.a)({},t),{},{_id:e})).then((function(e){console.log(e),b({show:!0,error:!1,message:"Contact Updated Successfully"}),setTimeout((function(){return b({show:!1,error:!1,message:""})}),2e3)})).catch((function(e){var t,s;console.log(e.response.data.error),b({show:!1,error:!0,message:(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.error)||"Error"}),setTimeout((function(){return b({show:!1,error:!1,message:""})}),2e3)}))},f=function(e){E.saveNewContact(e).then((function(e){console.log(e),b({show:!0,error:!1,message:"Contact Added Successfully"}),setTimeout((function(){return b({show:!1,error:!1,message:""})}),2e3)})).catch((function(e){var t,s;console.log(e.response.data.error),b({show:!1,error:!0,message:(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.error)||"Error"}),setTimeout((function(){return b({show:!1,error:!1,message:""})}),2e3)}))};return Object(a.useEffect)((function(){e&&_.getContactInfo(e).then((function(e){p(!0),o({name:e.result.name,number:e.result.number})})).catch((function(e){console.log(e)}))}),[e,o]),Object(n.jsx)("div",{className:"w-1/2 p-4",children:Object(n.jsx)("div",{className:"custom-box-shadow p-5 rounded-lg",children:Object(n.jsxs)("form",{className:"flex flex-col space-y-4",onSubmit:r((function(e){x?O(e):f(e)})),children:[Object(n.jsxs)("h2",{className:"text-lg font-medium",children:[x?"Update":"Add new"," contact"]}),Object(n.jsxs)("p",{className:"text-red-500",hidden:!u.error,children:["Error: ",u.message]}),Object(n.jsx)("p",{className:"text-green-500",hidden:!u.show,children:u.message}),Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{htmlFor:"name",className:"block mb-2",children:"Name"}),Object(n.jsx)("input",Object(l.a)({id:"name",className:"w-full border border-gray-300 rounded-lg",type:"text"},s("name",{required:!0}))),c.name&&Object(n.jsx)("span",{className:"text-red-500 mt-1",children:"Name is required"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{htmlFor:"number",className:"block mb-2",children:"Contact number"}),Object(n.jsx)("input",Object(l.a)({id:"number",className:"w-full border border-gray-300 rounded-lg",type:"number"},s("number",{required:!0}))),c.name&&Object(n.jsx)("span",{className:"text-red-500 mt-1",children:"Name is required"})]}),Object(n.jsx)("button",{className:"bg-green-500 hover:bg-green-600 text-white px-8 py-2 rounded-lg",type:"submit",children:x?"Update":"Add"})]})})})},B=function(){var e=Object(g.f)(),t=Object(g.h)().url;return Object(n.jsxs)("div",{className:"min-h-screen flex flex-col justify-between w-full bg-green-200 opacity-95 rounded-2xl",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(p.b,{activeClassName:"bg-green-700",to:"/home/dashboard",children:Object(n.jsx)("p",{className:"text-3xl p-4 mb-4",children:"phonebook"})}),Object(n.jsx)(p.b,{to:"/home/dashboard",children:Object(n.jsxs)("div",{className:"text-lg pb-6 pl-4 pr-8 flex items-center",children:[Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Object(n.jsx)("span",{children:"Dashboard"}),Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ml-auto h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),Object(n.jsx)(p.b,{to:"".concat(t,"/my-contacts"),children:Object(n.jsxs)("div",{className:"text-lg pb-6 pl-4 pr-8 flex items-center",children:[Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),Object(n.jsx)("span",{children:"My Contacts"}),Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ml-auto h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),Object(n.jsx)(p.b,{to:"".concat(t,"/my-profile"),children:Object(n.jsxs)("div",{className:"text-lg pl-4 pr-8 flex items-center",children:[Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Object(n.jsx)("span",{children:"My Profile"}),Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ml-auto h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}),Object(n.jsx)("div",{className:"text-lg mx-auto flex items-center mb-4",children:Object(n.jsxs)("span",{className:"bg-white px-8 py-2 rounded-full inline-flex items-center",onClick:function(){return localStorage.removeItem("phonebook_token"),void e.push("/")},children:[Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Object(n.jsx)("span",{children:"Logout"})]})})]})},D=s(7),z=s.n(D),I=s(17),U=s(6),Y=function(e){var t=e.contact,s=e.deleteContact,r=e.makeFavourite;return Object(n.jsxs)("div",{className:"border border-gray-300 rounded-lg px-4 py-2 flex items-center",children:[Object(n.jsxs)("div",{className:"mr-4 flex flex-col",children:[Object(n.jsxs)("p",{className:"text-medium",children:[t.name," "]}),Object(n.jsx)("p",{className:"",children:t.number})]}),Object(n.jsx)("button",{className:"px-8 py-2 ml-auto mr-2 border rounded-lg inline-flex",children:t.favourite?Object(n.jsx)("span",{className:"inline-flex",onClick:function(){return r(t._id,!1)},children:Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-yellow-300",viewBox:"0 0 20 20",fill:"currentColor",children:Object(n.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})}):Object(n.jsx)("span",{className:"inline-flex",onClick:function(){return r(t._id,!0)},children:Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})}),Object(n.jsx)(p.b,{to:"/home/edit-contact/".concat(t._id),className:"border rounded-lg px-8 py-2 mr-2",children:"Edit"}),Object(n.jsx)("button",{className:"px-8 py-2 rounded-lg bg-red-500 hover:bg-red-600 text-white",onClick:function(){s(t)},children:"Delete"})]})},T=function(e){var t=e.list,s=e.setList,r=Object(a.useState)(""),c=Object(N.a)(r,2),o=c[0],l=c[1];return Object(n.jsx)("input",{id:"filter-name",className:"border-gray-300 border rounded-lg p-2 w-full",placeholder:"Search as you type",type:"text",value:o,onChange:function(e){return function(e){l(e);var r=e?t.filter((function(e){return e.name.toLowerCase().includes(o.toLowerCase())})):t;console.log(r),s(r)}(e.target.value)}})},W=s(61),V=[{label:"Name",key:"name"},{label:"Number",key:"number"}],H=function(e){var t=e.contactsToShow,s=e.deleteContact,r=e.makeFavourite,c=Object(a.useState)([]),o=Object(N.a)(c,2),l=o[0],i=o[1];return Object(a.useEffect)((function(){i(Object(U.a)(t))}),[t]),Object(n.jsxs)("div",{className:"w-full custom-box-shadow rounded-lg p-5 space-y-4",children:[Object(n.jsxs)("div",{className:"flex items-center",children:[Object(n.jsx)("h2",{className:"text-lg font-semibold",children:"Contacts"}),Object(n.jsx)(W.CSVLink,{data:l,className:"bg-green-500 text-white px-8 py-2 rounded-lg ml-auto mr-2",headers:V,children:"Export CSV"}),Object(n.jsx)(p.b,{to:"/home/add-new-contact",className:"bg-green-500 hover:bg-green-600 text-white px-8 py-2 rounded-lg",children:"Add New Contact"})]}),Object(n.jsx)(T,{list:t,setList:i}),l.map((function(e){return Object(n.jsx)(Y,{contact:e,deleteContact:s,makeFavourite:r},e._id)}))]})},G=s(152),J=function(){var e=Object(a.useState)([]),t=Object(N.a)(e,2),s=t[0],r=t[1],c=L().setLoading;Object(a.useEffect)((function(){c(!0),E.getAllContacts().then((function(e){var t=e.result;c(!1),r(Object(U.a)(t))})).catch((function(e){console.log(e.response.data.error),c(!1)}))}),[]);var o=function(){var e=Object(I.a)(z.a.mark((function e(t){var a,n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.fire({icon:"warning",title:"Delete Contact",text:"Are you sure?",showCancelButton:!0,confirmButtonText:"Delete",confirmButtonColor:"#ef4444"});case 2:if(!e.sent.isConfirmed){e.next=17;break}return e.prev=4,c(!0),e.next=8,E.deleteContact(t._id);case 8:a=e.sent,c(!1),a&&(n=s.filter((function(e){return e._id!==t._id})),r(Object(U.a)(n))),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),c(!1),console.log(e.t0.response.data.error);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{children:Object(n.jsx)(H,{contactsToShow:s,deleteContact:o,makeFavourite:function(e,t){c(!0),console.log(t),_.updateContact({_id:e,favourite:t}).then((function(){c(!1);var a=s.map((function(s){return s._id===e?Object(l.a)(Object(l.a)({},s),{},{favourite:t}):s}));r(Object(U.a)(a))})).catch((function(){c(!1)}))}})})},Z=function(e){var t=e.favourite;return console.log(t),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"p-3 flex bg-white rounded-2xl text-black",children:[Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-green-600 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:Object(n.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd"})}),Object(n.jsxs)("div",{className:"flex flex-col",children:[Object(n.jsx)("div",{children:t.name}),Object(n.jsx)("div",{children:t.number}),Object(n.jsx)("div",{children:"View"})]})]})})},K={getFavouriteContacts:function(e){return m.getRequest("/contacts/favourites")},getGraphData:function(e){return m.postRequest("/contacts/graphData",e)}},Q=function(){var e=Object(a.useState)([]),t=Object(N.a)(e,2),s=t[0],r=t[1],c=L().setLoading;return Object(a.useEffect)((function(){c(!0),K.getFavouriteContacts().then((function(e){c(!1),console.log(e.result),r(Object(U.a)(e.result))})).catch((function(e){c(!1),console.log(e)}))}),[]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"p-8 rounded-2xl bg-green-200 bg-opacity-90 shadow-xl",children:[Object(n.jsxs)("div",{className:"flex mb-3",children:[Object(n.jsx)("span",{className:"text-lg",children:"Favourite Contacts"}),s.length>0?Object(n.jsxs)("span",{className:"text-lg ml-auto",children:[s.length," ",1===s.length?"Contact":"Contacts"]}):""]}),Object(n.jsx)("div",{className:"flex flex-wrap -m-4",children:s.length>0?s.map((function(e){return Object(n.jsx)("div",{className:"m-4",style:{flex:"0 0 45%"},children:Object(n.jsx)(Z,{favourite:e})},e._id)})):Object(n.jsx)("span",{className:"m-4",children:"No Favourites yet!"})})]})})},X=s(63),$=s(15),ee=s(39),te=s.n(ee);$.d.register($.c,$.h,$.j,$.g,$.n,$.o);var se=function(){var e=Object(a.useState)([]),t=Object(N.a)(e,2),s=t[0],r=t[1],c=Object(a.useState)([]),o=Object(N.a)(c,2),l=o[0],i=o[1],d={startDate:te()().subtract(7,"days").format("YYYY-MM-DD"),stopDate:te()().format("YYYY-MM-DD")};Object(a.useEffect)((function(){K.getGraphData(d).then((function(e){var t,s;i(null===e||void 0===e||null===(t=e.result)||void 0===t?void 0:t.map((function(e){return e._id}))),r([{data:null===e||void 0===e||null===(s=e.result)||void 0===s?void 0:s.map((function(e){return e.count})),borderColor:"rgb(0, 0, 0)"}])})).catch((function(e){console.log(e)}))}),[]);var u={labels:l,datasets:s,borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"};return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"p-8 rounded-2xl bg-green-200 bg-opacity-90 my-4 shadow-xl",children:[Object(n.jsx)("h2",{className:"text-lg mb-4",children:"Frequency Graph"}),Object(n.jsx)(X.a,{options:{responsive:!0,scales:{y:{ticks:{color:"black",stepSize:1,beginAtZero:!0},grid:{color:"black"},title:{display:!0,text:"No. of contacts",color:"black"}},x:{ticks:{color:"black",stepSize:1,beginAtZero:!0},grid:{color:"black"},title:{display:!0,text:"Dates",color:"black"}}}},data:u})]})})},re=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"flex p-4",children:Object(n.jsxs)("div",{className:"w-2/3",children:[Object(n.jsx)(Q,{}),Object(n.jsx)(se,{})]})})})},ce=s(64),ae=function(){var e={firstName:"",lastName:"",username:"",profilePicture:"",mobileNumber:""},t=Object(h.a)(),s=t.register,r=t.handleSubmit,c=t.formState.errors,o=t.watch,i=t.getValues,d=t.reset,u=Object(a.useState)(e),b=Object(N.a)(u,2),j=b[0],m=b[1],x=Object(a.useState)(!1),p=Object(N.a)(x,2),O=p[0],f=p[1],g=Object(a.useState)({x:0,y:0}),w=Object(N.a)(g,2),v=w[0],y=w[1],k=L().setLoading;Object(a.useRef)({}).current=o("password",""),Object(a.useEffect)(Object(I.a)(z.a.mark((function t(){var s,r;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k(!0),t.prev=1,t.next=4,E.getProfile();case 4:s=t.sent,(r=s.result)&&(e={firstName:(c=r).firstName,lastName:c.lastName,username:c.username,mobileNumber:c.mobileNumber},m(e),k(!1)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),k(!1),console.log(t.t0);case 13:case"end":return t.stop()}var c}),t,null,[[1,9]])}))),[]);var C=function(){var e=Object(I.a)(z.a.mark((function e(t){var s;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.changePassword(t);case 3:s=e.sent,console.log(s,"Password updated"),d({password:"",newPassword:"",confirmPassword:""}),f(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),P=[];return Object(n.jsxs)("div",{className:"w-full custom-box-shadow rounded-lg p-5 space-y-4",children:[Object(n.jsx)("h3",{className:"text-3xl",children:"My Profile"}),Object(n.jsx)("div",{className:"mt-4 border-b"}),Object(n.jsxs)("div",{className:"mt-4 flex",children:[Object(n.jsx)("div",{className:"w-1/6",children:Object(n.jsxs)("div",{className:"border rounded-xl p-2 flex flex-col items-center",children:[Object(n.jsx)("img",{width:150,height:150,className:" border-none",src:j.profilePicture,alt:""}),Object(n.jsx)("input",{onChange:function(e){return t=e,console.log(t.target),Object(n.jsx)(ce.a,{image:t.target.files[0],crop:v,aspect:4/3,onCropChange:y,onCropComplete:P});var t},className:"w-full opacity-0 h-8 mt-4",type:"file"}),Object(n.jsx)("button",{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white px-4 py-1 mb-1 -mt-8 rounded-lg",children:" Upload Image"})]})}),Object(n.jsx)("div",{className:"w-3/4 p-2",children:Object(n.jsxs)("div",{className:"w-full space-y-4",children:[Object(n.jsxs)("div",{className:"flex justify-between",children:[Object(n.jsx)("h5",{className:"text-xl font-bold",children:"".concat(j.firstName," ").concat(j.lastName)}),O?"":Object(n.jsx)("button",{onClick:function(){return f(!0)},className:"bg-green-500 hover:bg-green-600 text-white px-4 py-1 my-1 rounded-lg",children:"Change Password"})]}),Object(n.jsx)("p",{children:j.username}),Object(n.jsx)("p",{children:j.mobileNumber})]})})]}),function(){var e;if(O)return Object(n.jsxs)("div",{className:"w-full  p-2 space-y-4",children:[Object(n.jsx)("p",{className:"text-xl",children:"Change Password"}),Object(n.jsxs)("form",{onSubmit:r(C),className:"flex flex-col space-y-3",children:[Object(n.jsxs)("label",{className:"w-1/4 flex flex-col space-y-2",children:["Current Password",Object(n.jsx)("input",Object(l.a)(Object(l.a)({},s("password",{required:!0})),{},{className:"ms-4 rounded  border-1",type:"password",placeholder:"Enter Current Password"})),c.password&&Object(n.jsx)("span",{className:"text-red-500 text-sm",children:"Current Password is required"})]}),Object(n.jsxs)("label",{className:"w-1/4 flex flex-col space-y-2",children:["New Password",Object(n.jsx)("input",Object(l.a)(Object(l.a)({},s("newPassword",{required:!0})),{},{className:"ms-4 rounded  border-1",type:"password",placeholder:"Enter New Password"})),c.newPassword&&Object(n.jsx)("span",{className:"text-red-500 text-sm",children:"New Password is Required"})]}),Object(n.jsxs)("label",{className:"w-1/4 flex flex-col space-y-2",children:["Confirm New Password",Object(n.jsx)("input",Object(l.a)(Object(l.a)({},s("confirmPassword",{required:"Confirm Password is required",validate:{matchesPreviousPassword:function(e){return i().newPassword===e||"Password does not match"}}})),{},{className:"ms-4 rounded  border-1",type:"password",placeholder:"Confirm New Password"})),Object(n.jsxs)("span",{className:"text-red-500 text-sm",children:[" ",null===c||void 0===c||null===(e=c.confirmPassword)||void 0===e?void 0:e.message," "]})]}),Object(n.jsx)("button",{type:"submit",className:"w-1/5 bg-green-500 hover:bg-green-600 text-white px-4 py-1 my-1 rounded-lg",children:"Update password"})]})]})}()]})},ne=function(){var e=Object(g.h)().path;return Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"flex max-h-screen",children:[Object(n.jsx)("div",{className:"w-1/5",children:Object(n.jsx)(B,{})}),Object(n.jsxs)("div",{className:"w-4/5 flex-1 max-h-screen overflow-y-auto ",children:[Object(n.jsx)(g.a,{exact:!0,path:"".concat(e),children:Object(n.jsx)(re,{})}),Object(n.jsx)(g.a,{exact:!0,path:"".concat(e,"/my-profile"),children:Object(n.jsx)(ae,{})}),Object(n.jsx)(g.a,{exact:!0,path:"".concat(e,"/dashboard"),children:Object(n.jsx)(re,{})}),Object(n.jsx)(g.a,{exact:!0,path:"".concat(e,"/my-contacts"),children:Object(n.jsx)(J,{})}),Object(n.jsx)(g.a,{exact:!0,path:"".concat(e,"/add-new-contact"),children:Object(n.jsx)(A,{})}),Object(n.jsx)(g.a,{exact:!0,path:"".concat(e,"/edit-contact/:id"),children:Object(n.jsx)(A,{})})]})]})})},oe=(s(168),{forgotPassword:function(e){return m.postRequest("/users/forgot-password",e)}}),le=function(){var e=Object(h.a)(),t=e.handleSubmit,s=e.register,r=e.formState.errors,c=e.reset,a=L().setLoading;return Object(n.jsxs)("form",{onSubmit:t((function(e){a(!0),oe.forgotPassword(e).then((function(e){a(!1),R.b.success(e.result.message),c()})).catch((function(e){var t;a(!1),R.b.error((null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.message)||"Internal server error")}))})),className:"flex flex-col space-y-4 custom-box-shadow p-8 md:p-10 w-full md:w-3/4 lg:w-1/3 rounded-lg bg-white",children:[Object(n.jsx)("h2",{className:"text-xl",children:"Forgot Password"}),Object(n.jsx)("p",{className:"text-gray-500",children:"A password reset link will be shared on account's email, please enter your email"}),Object(n.jsxs)("div",{className:"flex flex-col",children:[Object(n.jsx)("label",{className:"block mb-2",htmlFor:"email",children:"Email"}),Object(n.jsx)("input",Object(l.a)(Object(l.a)({},s("username",{required:"Email is required"})),{},{className:"w-full border border-gray-300 rounded-lg",type:"email",name:"username"})),r.username&&Object(n.jsx)("span",{className:"text-red-500 text-sm",children:"Email is Required"})]}),Object(n.jsx)("button",{type:"submit",className:"w-full bg-green-500 hover:bg-green-600 text-white px-8 py-2 rounded-lg",children:"Send reset link"})]})},ie=function(){return Object(n.jsx)(o,{children:Object(n.jsx)(le,{})})},de=function(){var e=Object(h.a)(),t=e.handleSubmit,s=e.register,r=e.formState.errors,c=e.reset,a=L().setLoading;return Object(n.jsxs)("form",{onSubmit:t((function(e){a(!0),oe.forgotPassword(e).then((function(e){a(!1),R.b.success(e.result.message),c()})).catch((function(e){var t;a(!1),R.b.error((null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.message)||"Internal server error")}))})),className:"flex flex-col space-y-4 custom-box-shadow p-8 md:p-10 w-full md:w-3/4 lg:w-1/3 rounded-lg bg-white",children:[Object(n.jsx)("h2",{className:"text-xl",children:"Reset your password"}),Object(n.jsx)("p",{className:"text-gray-500",children:"Your account is verified, please enter your new password."}),Object(n.jsxs)("div",{className:"flex flex-col",children:[Object(n.jsx)("label",{className:"block mb-2",htmlFor:"email",children:"New Password"}),Object(n.jsx)("input",Object(l.a)(Object(l.a)({},s("password",{required:"Pasword is required"})),{},{className:"w-full border border-gray-300 rounded-lg",type:"password",name:"password"})),r.password&&Object(n.jsx)("span",{className:"text-red-500 text-sm",children:"Email is Required"})]}),Object(n.jsxs)("div",{className:"flex flex-col",children:[Object(n.jsx)("label",{className:"block mb-2",htmlFor:"email",children:"Confirm New Passowrd"}),Object(n.jsx)("input",Object(l.a)(Object(l.a)({},s("newPassword",{required:"Password is required"})),{},{className:"w-full border border-gray-300 rounded-lg",type:"password",name:"newPassword"})),r.newPassword&&Object(n.jsx)("span",{className:"text-red-500 text-sm",children:"Email is Required"})]}),Object(n.jsx)("button",{type:"submit",className:"w-full bg-green-500 hover:bg-green-600 text-white px-8 py-2 rounded-lg",children:"Reset Password"})]})},ue=function(){return Object(n.jsx)(o,{children:Object(n.jsx)(de,{})})},be=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(S,{children:Object(n.jsx)(p.a,{children:Object(n.jsxs)(g.c,{children:[Object(n.jsx)(g.a,{path:"/login",children:Object(n.jsx)(M,{})}),Object(n.jsx)(g.a,{path:"/register",children:Object(n.jsx)(f,{})}),Object(n.jsx)(g.a,{path:"/forgot-password",children:Object(n.jsx)(ie,{})}),Object(n.jsx)(g.a,{path:"/reset-password/:userId",children:Object(n.jsx)(ue,{})}),Object(n.jsx)(g.a,{path:"/home",children:Object(n.jsx)(ne,{})}),Object(n.jsx)(g.a,{path:"/",children:Object(n.jsx)(M,{})})]})})}),Object(n.jsx)(R.a,{})]})};s(169);c.a.render(Object(n.jsx)(be,{}),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.966cda74.chunk.js.map