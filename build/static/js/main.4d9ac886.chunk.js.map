{"version":3,"sources":["httpServices.js","components/Persons.js","components/Filter.js","components/PersonForm.js","components/Header.js","App.js","index.js"],"names":["baseURL","process","trim","service","getAll","axios","get","then","response","data","create","person","post","deleteEntry","id","delete","status","update","put","_id","Persons","personsToShow","deletePerson","console","log","className","map","name","number","onClick","Filter","filter","setFilter","htmlFor","placeholder","type","value","onChange","e","target","PersonForm","props","onSubmit","addPerson","hidden","error","show","message","newName","setNewName","newNumber","setNewNumber","Header","App","useEffect","phonebookService","persons","setPersons","useState","setError","updatePerson","personList","respPerson","ogperson","filterDeleted","toLowerCase","includes","propsForPersonForm","preventDefault","find","window","confirm","concat","catch","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4d9ac886.chunk.js","sourcesContent":["import axios from 'axios';\r\nlet baseURL = '/api/persons'\r\n\r\nconst { REACT_APP_ENVTYPE } = process.env;\r\n\r\nif (REACT_APP_ENVTYPE.trim() === 'dev') {\r\n    baseURL = 'http://localhost:2000/api/persons'\r\n}\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseURL);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst create = (person) => {\r\n    const request = axios.post(baseURL, person);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst deleteEntry = (id) => {\r\n    const request = axios.delete(`${baseURL}/${id}`);\r\n    return request.then(response => response.status);\r\n}\r\n\r\nconst update = (person) => {\r\n    const request = axios.put(`${baseURL}/${person._id}`, person);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst service = { getAll, create, deleteEntry, update }\r\n\r\nexport default service;","const Persons = ({personsToShow, deletePerson}) => {\r\n    console.log(personsToShow);\r\n    return (\r\n      <div className='w-full custom-box-shadow rounded-lg p-5 space-y-4'>\r\n        <h2 className='text-lg font-semibold'>Contacts</h2>\r\n        {personsToShow.map((person) => (\r\n          <div className='border border-gray-300 rounded-lg px-4 py-2 flex items-center justify-between' key = {person._id}>\r\n            <div className='mr-4 flex flex-col'>\r\n              <p className='text-medium'>{person.name} </p>\r\n              <p className=''>{person.number}</p>\r\n            </div>\r\n            <button className='px-8 py-2 rounded-lg bg-red-500 hover:bg-red-600 text-white' onClick = {() => {deletePerson(person)}}>Delete</button>\r\n          </div>\r\n        ))}\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Persons;\r\n","const Filter = ({filter, setFilter}) => {\r\n    return (\r\n     <div className='mb-8 w-full custom-box-shadow rounded-lg p-5'>\r\n        <h2 className='text-lg font-semibold mb-4'>Filter</h2>\r\n        <label htmlFor='filter-name' className='block mb-2'>Name</label>\r\n        <input \r\n          id='filter-name'\r\n          className='border-gray-300 border rounded-lg p-2 w-full'\r\n          placeholder='Filter as you type'\r\n          type='text'\r\n          value = {filter}\r\n          onChange = {(e) => setFilter(e.target.value)}  />\r\n     </div>\r\n    )\r\n}\r\n\r\nexport default Filter;","const PersonForm = ({props}) => {\r\n    return (\r\n      <div className='custom-box-shadow p-5 rounded-lg'>\r\n        \r\n        <form className='flex flex-col space-y-4' onSubmit={props.addPerson}>\r\n          <h2 className='text-lg font-semibold'>Add new contact</h2>\r\n          <p className='text-red-500' hidden={!props.error.show}>Error: {props.error.message}</p>\r\n          <div>\r\n            <label htmlFor='name' className='block mb-2'>Name</label>\r\n            <input \r\n              id='name'\r\n              className='w-full border border-gray-300 rounded-lg'\r\n              type='text'\r\n              value = {props.newName}\r\n              onChange = {(e) => props.setNewName(e.target.value)} />\r\n          </div>\r\n          <div>\r\n            <label htmlFor='number' className='block mb-2'>Contact number</label>\r\n            <input \r\n              id='number'\r\n              className='w-full border border-gray-300 rounded-lg'\r\n              name='contact-number'\r\n              type='number'\r\n              value = {props.newNumber}\r\n              onChange = {(e) => props.setNewNumber(e.target.value)} />\r\n          </div>\r\n          <button className='bg-green-500 hover:bg-green-600 text-white px-8 py-2 rounded-lg' type='submit'>Add</button>\r\n        </form>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default PersonForm;\r\n","const Header = () => {\r\n    return (\r\n        <div className='flex items-baseline bg-green-500 text-white space-x-4 p-4'>\r\n            <h1 className='text-2xl font-semibold georama-medium'>phonebook</h1>\r\n            <p className='text-lg georama-medium'>All contacts at one place!</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header;\r\n","import React, { useState, useEffect } from 'react';\nimport phonebookService from './httpServices';\nimport Persons from './components/Persons';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Header from './components/Header';\n\nconst App = () => {\n\n  useEffect(() => {\n    phonebookService.getAll().then((persons) => setPersons(persons));\n  }, [])\n\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ filter, setFilter ] = useState('');\n  const [ error, setError ] = useState({show: false, message: ''});\n  \n  const addPerson = (e) => {\n    e.preventDefault();\n    const personList = [...persons];\n    const person = personList.find((person) => person.name === newName);\n    setError({show: false, message: ''});\n    if(person) {\n      const confirmUpdate = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      if (confirmUpdate) {\n        updatePerson(person, personList);\n      }\n      return;\n    }\n    phonebookService.create({name: newName, number: newNumber})\n    .then((person) => {\n      console.log('Resp', person)\n      setPersons(personList.concat(person))\n    })\n    .catch((error) => {\n      setError({show: true, message: error.response.data.error});\n    });\n  }\n\n  const updatePerson = (person, personList) => {\n    phonebookService.update({...person, number: newNumber})\n    .then((respPerson) => {\n      personList = personList.map(ogperson => {\n        if (ogperson._id === person._id) {\n          ogperson = {...ogperson, number: newNumber};\n        }\n        return ogperson;\n      });\n\n      setPersons(personList);\n    })\n  }\n\n  const deletePerson = (person) => {\n    const deleteConfirm = window.confirm(`Delete ${person._id}`);\n\n    if (deleteConfirm) {\n      phonebookService.deleteEntry(person._id)\n      .then((status) => {\n        if (status === 204) {\n          filterDeleted(person._id);\n        }\n      })\n      .catch((error) => {\n        console.log(error.response.data.error);\n      })\n    }\n  }\n\n  const filterDeleted = (id) => {\n    const personList = persons.filter((person) => person._id !== id);\n    setPersons([...personList]);\n    personsToShow = [...personList];\n  }\n  \n  let personsToShow = filter ? persons.filter((person) => person.name.toLowerCase().includes(filter.toLowerCase())) : persons;\n  \n  const propsForPersonForm = {\n    addPerson,\n    newName,\n    newNumber,\n    setNewName,\n    setNewNumber,\n    error\n  }\n  return (\n    <div>\n      <Header />\n      <div className='p-4'>\n        <div className='flex justify-center'>\n          <div className='w-full lg:w-1/3 space-y-8'>\n            <PersonForm props = {propsForPersonForm} />\n            <Filter filter = {filter} setFilter = {setFilter} />\n            <Persons personsToShow = {personsToShow} deletePerson = {deletePerson} />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default App;","import ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}